<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/transitional.dtd">
<!--

    Copyright (c) 1997, 2020 Oracle and/or its affiliates. All rights reserved.

    This program and the accompanying materials are made available under the
    terms of the Eclipse Public License v. 2.0 which is available at
    http://www.eclipse.org/legal/epl-2.0, or the Eclipse Distribution License
    v. 1.0 which is available at
    http://www.eclipse.org/org/documents/edl-v10.php.

    This Source Code may also be made available under the following Secondary
    Licenses when the conditions for such availability set forth in the Eclipse
    Public License v. 2.0 are satisfied: GNU General Public License v2.0
    w/Classpath exception which is available at
    https://www.gnu.org/software/classpath/license.html.

    SPDX-License-Identifier: EPL-2.0 OR BSD-3-Clause OR GPL-2.0 WITH
    Classpath-exception-2.0

-->

<html>
<head>
    <meta HTTP-EQUIV=CONTENT-TYPE CONTENT="text/html; charset=utf-8">
    <title>Why class4 &amp; class5 are incompatible</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000CC" vlink="#000080" alink="#0000CC">
<center>
    <a href="text0.html">First page</a> <a href="text22.html">Back</a> Continue Last page <a href="serial6pres.html">Overview</a> <a
        href="img23.html">Graphics</a></center>
<br>
<h1>Why class4 and class5 incompat?</h1>
<ul>
    <li><h2>When class5's TestObjectSuper tries to read its extra optional data, it is at a point in the stream in which blockLength is already maxBlockLength
        and it's right at the beginning of an end tag.</h2></li>
    <li><h2>Since blockLength is maxBlockLength (what start_block uses to prevent recursive calls from alignAndCheck and checkBlockLength as well as when the
        next thing is a valuetag or end tag), our code never checks for an end tag in checkBlockLength We ultimately get a MARSHAL exception.</h2></li>
    <li><h2>Tried many ways around this, but ultimately it was too complicated and didn't work in all cases. These tests will generally show you pretty quickly
        if your changes help.</h2></li>
</ul>
</body>
</html>
